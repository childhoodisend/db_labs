"Сессия"

Ваш долг – помочь родной кафедре в автоматизации отчетности по ходу и результатам сессии.
В базе данных должна храниться информация о получении студентами кафедры зачетов и сдаче экзаменов
(оценки несущественны, важен лишь факт сдачи). Необходима также информация об условиях допуска к экзаменам
(например, получение некоторого количества зачетов или зачета по конкретному предмету).
Информация, которая может быть востребована:

1 все об успеваемости любого студента – что ему нужно сдавать, что сдано, что осталось
2 списки студентов с долгами по конкретным предметам
3 списки студентов, сдавших сессию, с одним долгом, двумя и т.д.

Дополнение: каждый студент учится в одной из групп. Для каждой группы определены набор экзаменов и зачетов,
обязательных для сдачи. Студент может также сдавать и получать зачеты по необязательным предметам.

Запросы:
1 Выбрать всех студентов из одной группы упорядочив по ФИО.
2 Упорядочить сданные кем-либо экзамены по числу сдавших.
3 Каково число студентов, не получивших ни одного зачета?
4 Найти самую малочисленную группуНайти студента, сдавшего больше всех экзаменов
5 Найти всех студентов, сдавших все обязательные экзамены с хотя бы одним несданным зачетом
6 Найти группу с самой большой нагрузкой (числом зачетов и экзаменов).
7 Найти, сколько студентов не допущены (т.е., не получили необходимых зачетов) хотя бы к одному обязательному экзамену.
8 Найти самый «сложный» экзамен (с максимальным процентом не сдавших).
9 Полностью необязательные экзамены не рассматривать.
10 Проверить, есть ли в базе студент, не допущенный ни к одному обязательному для его группы экзамену.
Можно считать, что каждая группа обязана сдавать хотя бы один экзамен.

1 Хранимые процедуры и функции

1.1 Написать функцию для занесения в базу данных информации об экзамене.
Входные параметры: название экзамена, название семинара, который является необходимым для сдачи этого экзамена.
Функция должна вернуть id нового экзамена, в случае если он был успешно создан.
Перед добавлением экзамена необходимо проверить, занесена ли в базу информация о необходимом семинаре.
В случае если нет – добавить сначала семинар. Добавить связь между экзаменом и семинаром в таблицу ExamRequirements1.

1.2 Написать функцию для перевода студента из группы в группу.
Функция должна вернуть таблицу из экзаменов, которые необходимо сдать студенту, чтобы ликвидировать разницу в программе.
Входные параметры: номер зачетной книжки студента, старый и новый номера группы. Студент может быть переведен из группы
в группу, если разница в программе (количество обязательных семинаров и экзаменов для новой группы по сравнению с
количеством обязательных семинаров и экзаменов в старой) составляет не более 10% от общего количества семинаров и
экзаменов новой группы. Если разница превышает этот порог, должно быть возвращено исключение.

1.3 Написать процедуру для перевода всех студентов, успешно сдавших все обязательные экзамены на следующий курс.
Входные параметры: текущий номер группы, номер группы на следующем курсе.
Выходной параметр: количество переведенных студентов.

2 Триггеры

2.1 Создать триггер на удаление зависимости экзамена от семинара.
При удалении зависимости, необходимо проверять, что количество всех обязательных семинаров для экзамена
не станет меньше, чем минимальное допустимое количество необходимых семинаров для экзамена, и удалять
только в том случае, если остается достаточное количество семинаров.

2.2 Создать триггер на удаление студента. При удалении студента проверять, остались ли еще студенты в его группе.
Если студентов больше не осталось, удалить группу.